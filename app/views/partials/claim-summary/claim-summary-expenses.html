<table>

  <thead>
  <tr>
    <th>Expense(s)</th>
    <th>Amount</th>
    <th></th>
  </tr>
  </thead>

  <tbody id='claim-expense'>
  {% for claimExpense in claimDetails.claimExpenses %}

  {% if claimExpense.fromInternalWeb %}
    <tr {% if claimExpense.DocumentStatus == 'upload-later' %} class="warning" {% endif %}>
  {% else %}
    <tr {% if errors['claim-expense'][0] %} {% if claimExpense.DocumentStatus == null %} {% if displayHelper.getExpenseReceiptRequired(claimExpense.ExpenseType) %} class="warning" {% endif %}{% endif %}{% endif %}>
  {% endif %}
    <td>
      <span class="bold pull-left expense-padding">{{ displayHelper.getExpenseDisplayName(claimExpense.ExpenseType) }} - </span>
      <form
        action="/apply/{{ claimType }}/eligibility/{{ referenceId }}/claim/{{ claimId }}/summary/remove-expense/{{ claimExpense.ClaimExpenseId}}?claimDocumentId={{ claimExpense.ClaimDocumentId }}"
        method="post" class="form">
        <input type="hidden" name="_csrf" value="{{ csrfToken }}">
        <button class="expense link" name="remove">remove expense</button>
      </form>
      <div>{{ claimExpenseHelper(claimExpense) }}</div>
    </td>
    <td>Â£{{claimExpense.Cost}}</td>

    <td>
    {% if displayHelper.getExpenseReceiptRequired(claimExpense.ExpenseType) %}
      {% if claimDetails.claim.IsAdvanceClaim %}
        <span class="text-pending">Receipt must be supplied after visit</span>

      {% elif claimExpense.fromInternalWeb %}
        {% if claimExpense['DocumentStatus'] == 'uploaded' %}
          <span class="text-success">Receipt uploaded</span>
        {% elif claimExpense['DocumentStatus'] == 'upload-later' %}
          <span class="text-warning">Receipt pending upload</span>
          <a href="/apply/updating/eligibility/{{ referenceId }}/claim/{{ claimId }}/file-upload?document=RECEIPT&claimExpenseId={{ claimExpense.ClaimExpenseId }}&dob={{ dob }}" id="update-receipt" class="button grey pull-right">Add</a>
        {% elif claimExpense['DocumentStatus'] == 'post-later' %}
          <span class="text-pending">Sending receipt by post</span>
          <form
            action="/your-claims/dob/{{ referenceId }}/{{ claimId }}/change/{{ claimExpense.ClaimDocumentId }}?document=VISIT_CONFIRMATION&claimExpenseId={{ claimExpense.ClaimExpenseId }}&dob={{ dob }}"
            method="post" class="form pull-right">
            <input type="hidden" name="_csrf" value="{{ csrfToken }}">
            <button class="link" name="change" id="change-receipt-post">change</button>
          </form>
        {% endif %}

      {% else %}
        {% if claimExpense.DocumentStatus == 'uploaded' %}
          <span class="text-success">Receipt uploaded</span>
          <form
            action="/apply/{{ claimType }}/eligibility/{{ referenceId }}/claim/{{ claimId }}/summary/view-document/{{ claimExpense.ClaimDocumentId }}"
            method="get" class="form pull-right">
            <input type="hidden" name="_csrf" value="{{ csrfToken }}">
            <button class="link">view</button>
          </form>
          <span class="button-separator"></span>
          <form
            action="/apply/{{ claimType }}/eligibility/{{ referenceId }}/claim/{{ claimId }}/summary/remove-document/{{ claimExpense.ClaimDocumentId }}?document=RECEIPT&claimExpenseId={{ claimExpense.ClaimExpenseId }}&dob={{ dob }}"
            method="post" class="form pull-right">
            <input type="hidden" name="_csrf" value="{{ csrfToken }}">
            <button class="link" name="remove">remove</button>
          </form>

        {% elif claimExpense.DocumentStatus == 'upload-later' %}
          <span class="text-pending">Uploading receipt later</span>
          <form
            action="/apply/{{ claimType }}/eligibility/{{ referenceId }}/claim/{{ claimId }}/summary/remove-document/{{ claimExpense.ClaimDocumentId }}?document=RECEIPT&claimExpenseId={{ claimExpense.ClaimExpenseId }}&dob={{ dob }}"
            method="post" class="form pull-right">
            <input type="hidden" name="_csrf" value="{{ csrfToken }}">
            <button class="link" name="change">change</button>
          </form>

        {% elif claimExpense.DocumentStatus == 'post-later' %}
          <span class="text-pending">Sending receipt by post</span>
          <form
            action="/apply/{{ claimType }}/eligibility/{{ referenceId }}/claim/{{ claimId }}/summary/remove-document/{{ claimExpense.ClaimDocumentId }}?document=RECEIPT&claimExpenseId={{ claimExpense.ClaimExpenseId }}&dob={{ dob }}"
            method="post" class="form pull-right">
            <input type="hidden" name="_csrf" value="{{ csrfToken }}">
            <button class="link" name="change">change</button>
          </form>

        {% else %}
          <span class="text-warning">Receipt required</span>
          <a href="/apply/{{ claimType }}/eligibility/{{ referenceId }}/claim/{{ claimId }}/file-upload?document=RECEIPT&claimExpenseId={{ claimExpense.ClaimExpenseId }}" id="add-receipt-{{ claimExpense.ClaimExpenseId }}&dob={{ dob }}" class="button grey pull-right add-expense-receipt ">Add</a>

        {% endif %}
      {% endif %}
    {% endif %}
    </td>
  </tr>
  {% endfor %}
  </tbody>

</table>